<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>stg-repair | Stacked Git</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://stacked-git.github.io/man/stg-repair.html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><meta name="author" content="Stacked Git Authors">
<meta property="og:site_name" content="Stacked Git">
<meta property="og:title" content="stg-repair">
<meta property="og:url" content="https://stacked-git.github.io/man/stg-repair.html">
<meta property="og:description" content="NAME

stg-repair - Fix StGit metadata if branch was modified with git commands



SYNOPSIS


stg repair





DESCRIPTION

If you modify an StGit stack (branch) with some git commands — such
as commit,">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-05-11T20:55:40Z">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="https://stacked-git.github.io/">

            <span id="blog-title">Stacked Git</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Documentation</a>
            <div class="dropdown-menu">
                    <a href="../usage-example.html" class="dropdown-item">Usage Example</a>
                    <a href="tutorial.html" class="dropdown-item">Tutorial</a>
                    <a href="stg.html" class="dropdown-item">Man Pages</a>
            </div>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Development</a>
            <div class="dropdown-menu">
                    <a href="https://github.com/stacked-git/stgit" class="dropdown-item">Source Code</a>
                    <a href="https://github.com/stacked-git/stgit/releases" class="dropdown-item">Releases</a>
                    <a href="https://github.com/stacked-git/stgit/issues" class="dropdown-item">Issue Tracker</a>
                    <a href="https://groups.google.com/d/forum/stgit" class="dropdown-item">Forum</a>
            </div>

                
            </li>
</ul>
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text storypage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">stg-repair</a></h1>

        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<div class="sect1">
<h4 id="_name">NAME</h4>
<div class="sectionbody">
<div class="paragraph"><p>stg-repair - Fix StGit metadata if branch was modified with git commands</p></div>
</div>
</div>
<div class="sect1">
<h4 id="_synopsis">SYNOPSIS</h4>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>stg repair</em></pre>
<div class="attribution">
</div>
</div>
</div>
</div>
<div class="sect1">
<h4 id="_description">DESCRIPTION</h4>
<div class="sectionbody">
<div class="paragraph"><p>If you modify an StGit stack (branch) with some git commands — such
as commit, pull, merge, and rebase — you will leave the StGit
metadata in an inconsistent state. In that situation, you have two
options:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Use "stg undo" to undo the effect of the git commands. (If you
     know what you are doing and want more control, "git reset" or
     similar will work too.)
</p>
</li>
<li>
<p>
Use "stg repair". This will fix up the StGit metadata to
     accommodate the modifications to the branch. Specifically, it will
     do the following:
</p>
<div class="ulist"><ul>
<li>
<p>
If you have made regular git commits on top of your stack of
         StGit patches, "stg repair" makes new StGit patches out of
         them, preserving their contents.
</p>
</li>
<li>
<p>
However, merge commits cannot become patches; if you have
         committed a merge on top of your stack, "repair" will simply
         mark all patches below the merge unapplied, since they are no
         longer reachable. If this is not what you want, use "stg
         undo" to get rid of the merge and run "stg repair" again.
</p>
</li>
<li>
<p>
The applied patches are supposed to be precisely those that
         are reachable from the branch head. If you have used e.g.
         "git reset" to move the head, some applied patches may no
         longer be reachable, and some unapplied patches may have
         become reachable. "stg repair" will correct the appliedness
         of such patches.
</p>
<div class="literalblock">
<div class="content monospaced">
<pre>"stg repair" will fix these inconsistencies reliably, so as long
as you like what it does, you have no reason to avoid causing
them in the first place. For example, you might find it
convenient to make commits with a graphical tool and then have
"stg repair" make proper patches of the commits.</pre>
</div>
</div>
</li>
</ul></div>
</li>
</ol></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If using git commands on the stack was a mistake, running "stg
repair" is <em>not</em> what you want. In that case, what you want is option
(1) above.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h4 id="_stgit">StGit</h4>
<div class="sectionbody">
<div class="paragraph"><p>Part of the StGit suite - see <a href="stg.html">stg(1)</a></p></div>
</div>
</div>
</div>
    </div>
    

</article><!--End of body content--><footer id="footer">
            © 2020 Stacked Git Authors 
            
            
        </footer>
</div>
</div>


        <script src="../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
